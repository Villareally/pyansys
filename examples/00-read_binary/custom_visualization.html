

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Custom Scalar Visualization &mdash; pyansys 0.44.19 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Cylindrical Nodal Stress" href="load_corner_result.html" />
    <link rel="prev" title="MAPDL and Result Reader Examples" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> pyansys
          

          
          </a>

          
            
            
              <div class="version">
                0.44.19
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Interactive MAPDL Python Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mapdl/index.html">ANSYS MAPDL Interactive Control</a></li>
</ul>
<p class="caption"><span class="caption-text">ANSYS File Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive.html">Reading and Writing ANSYS Archive Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loading_results.html">Working with a ANSYS Result Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Archive and Result File Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loading_km.html">Working with a ANSYS Full File (full)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loading_emat.html">Working with a ANSYS Element Matrix File (.emat)</a></li>
</ul>
<p class="caption"><span class="caption-text">Example Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">MAPDL and Result Reader Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#loading-and-visualizing-result-files">Loading and Visualizing Result Files</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Custom Scalar Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting">Plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-node-scalars">Plotting Node Scalars</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-with-missing-values">Plotting With Missing Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="load_corner_result.html">Cylindrical Nodal Stress</a></li>
<li class="toctree-l3"><a class="reference internal" href="load_shaft_result.html">Shaft Modal Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="load_thermal_result.html">Thermal Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="pontoon.html">Shell Static Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#cyclic-result-analysis">Cyclic Result Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#ansys-mapdl-examples-using-pyansys">ANSYS MAPDL Examples Using Pyansys</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quality.html">Compute Cell Quality</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyansys</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">MAPDL and Result Reader Examples</a> &raquo;</li>
        
      <li>Custom Scalar Visualization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/examples/00-read_binary/custom_visualization.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-00-read-binary-custom-visualization-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="custom-scalar-visualization">
<span id="ref-custom-visualization"></span><span id="sphx-glr-examples-00-read-binary-custom-visualization-py"></span><h1>Custom Scalar Visualization<a class="headerlink" href="#custom-scalar-visualization" title="Permalink to this headline">¶</a></h1>
<p>Display custom scalars using an existing mesh.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pyansys</span>

<span class="c1"># Download an example shaft modal analysis result file</span>
<span class="n">shaft</span> <span class="o">=</span> <span class="n">pyansys</span><span class="o">.</span><span class="n">download_shaft_modal</span><span class="p">()</span>
</pre></div>
</div>
<p>Each result file contains both a <code class="docutils literal notranslate"><span class="pre">mesh</span></code> property and a <code class="docutils literal notranslate"><span class="pre">grid</span></code>
property.  The <code class="docutils literal notranslate"><span class="pre">mesh</span></code> property can be through as the MAPDL
representation of the FEM while the <code class="docutils literal notranslate"><span class="pre">grid</span></code> property can be through
of the Python visualizing property used to plot within Python.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shaft.mesh:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shaft</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">79</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shaft.grid:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>shaft.mesh:
 ANSYS Mesh
  Number of Nodes:              27132
  Number of Elements:           25051
  Number of Element Types:      6
  Number of Node Components:    4
  Number of Element Components: 3

-------------------------------------------------------------------------------
shaft.grid:
 UnstructuredGrid (0x7fd3d19b8d00)
  N Cells:      25051
  N Points:     27132
  X Bounds:     0.000e+00, 2.700e+02
  Y Bounds:     -4.000e+01, 4.000e+01
  Z Bounds:     -4.000e+01, 4.000e+01
  N Arrays:     16
</pre></div>
</div>
</div>
<div class="section" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<p>The grid instance is a <cite>pyvista.UnstructuredGrid</cite> part of the
<cite>pyvista</cite> library.  This class allows for advanced plotting using
VTK in just a few lines of code.  For example, you can plot the
underlying mesh with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(461.5153157248284, 326.5153157248283, 326.5153157248283),
 (135.00000000000003, 0.0, 0.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
</div>
<div class="section" id="plotting-node-scalars">
<h1>Plotting Node Scalars<a class="headerlink" href="#plotting-node-scalars" title="Permalink to this headline">¶</a></h1>
<p>If you point-wise or cell-wise scalars (nodes and elements in FEA),
you can plot these scalars by setting the <code class="docutils literal notranslate"><span class="pre">scalars=</span></code> parameter.
Here, I’m simply using the x location of the nodes to color the
mesh.</p>
<p>It follows that you can use any set of scalars provided that it
matches the number of nodes in the unstructured grid or the number
of cells in the unstructured grid.  Here, we’re plotting node values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x_scalars</span> <span class="o">=</span> <span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">scalars</span><span class="o">=</span><span class="n">x_scalars</span><span class="p">,</span> <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(461.5153157248284, 326.5153157248283, 326.5153157248283),
 (135.00000000000003, 0.0, 0.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
</div>
<div class="section" id="plotting-with-missing-values">
<h1>Plotting With Missing Values<a class="headerlink" href="#plotting-with-missing-values" title="Permalink to this headline">¶</a></h1>
<p>If you do not have values for every node (for example, the midside
nodes), you can leave these values as NAN and the plotter will take
care of plotting only the real values.</p>
<p>For example, if you have calculated strain scalars that are only
available at certain nodes, you can still plot those.  This example
just nulls out the first 2000 nodes to be able to visualize the
missing values.  If your are just missing midside values, your plot
will not show the missing values since <cite>pyvista</cite> only plots the edge
nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pontoon</span> <span class="o">=</span> <span class="n">pyansys</span><span class="o">.</span><span class="n">download_pontoon</span><span class="p">()</span>
<span class="n">nnum</span><span class="p">,</span> <span class="n">strain</span> <span class="o">=</span> <span class="n">pontoon</span><span class="o">.</span><span class="n">nodal_elastic_strain</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">scalars</span> <span class="o">=</span> <span class="n">strain</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">scalars</span><span class="p">[:</span><span class="mi">2000</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>  <span class="c1"># here, we simulate unknown values</span>

<span class="n">pontoon</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">scalars</span><span class="o">=</span><span class="n">scalars</span><span class="p">,</span> <span class="n">show_edges</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_003.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(150.0152852510816, 105.0152852510816, 108.01528525108166),
 (45.000000000000014, 8.881784197001252e-16, 3.000000000000005),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.503 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-read-binary-custom-visualization-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/bc5ebbdb7e9c8ac974fb708e0f25244c/custom_visualization.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">custom_visualization.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/469ea2028d4cb814c9a12a8257949d65/custom_visualization.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">custom_visualization.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="load_corner_result.html" class="btn btn-neutral float-right" title="Cylindrical Nodal Stress" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="MAPDL and Result Reader Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Alex Kaszynski

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>